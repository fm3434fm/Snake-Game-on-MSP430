


Hardware Architecture: 
This architecture consists of a 3 x 3 Keyboard PCB with four key switches and four key caps attached to a PCB. These form the up, down, left ,and right buttons. These buttons handle in-game movement, allowing players to move the snake to eat food.The keyboard PCB is then also connected to a MSP430G2553 microcontroller at pins 2.0, 2.2, 2.3, and 2.4. A 16 x 16 LED matrix is also connected to the same MSP430G2553 microcontroller as well. Specifically,  its DIN wire, 5V wire, and GND wire connected to the microcontroller’s 1.7 pin, 5V pin, and GND pin respectively . This LED matrix displays the snake game, showing  snake  movement and food location in-game as well as corresponding start-up, win, and loss condition LED light animations. 

Software Architecture: 
There are five files that comprise this architecture: rand.c, rand.h, ws2812.c, ws2812.h , and snake.c 

Rand.c & rand. h: 
This file consists of two functions: rand and prand. rand() generates a true random seed, and prand(seed) is a pseudo random number generator that uses the seed generated by rand(). prand must be called each time food is eaten so that food is spawned in a new random location.




ws2812.c & ws2812.h: 
ws2812.c is a driver that display lights on the LED matrix, modified heavily from https://github.com/mjmeli/MSP430-NeoPixel-WS2812-Library. It defines a gradient of colors[86][3], plus a few other colors like black and green, taken from matplotlib’s “plasma” colormap, with each subarray corresponding to a RGB value. It consists of two functions: initStrip and showStrip. initStrip initializes the pin 1.7 for SPI output using UCB0 on a 16 MHz clock. showStrip takes a 16x16 array of unsigned chars and displays them as is on the LED array.

snake.c: 

snake.c is where all game logic for the snake game is located. 
File functions and purpose:

init_wdt(): Initializes the watchdog timer. 

startgame(): Sets the conditions when the game has not started yet, such as going to the starting screen, resetting the snake to length 2, spawning food, and clearing the board. 

makefood(): Handles food generation using random number generation. Checks for invalid food generation locations, such as on top of the snake, and retries until a valid location is found.
 
printboard (): Adds snake and food to the game board and displays the board on the LED array before clearing board again.

main(): 
First, a seed value is generated (for food location generation), the watchdog timer is turned off , LED matrix is initialized, and the buttons (from the 3 x 3 Keyboard PCB) and periodic timers are configured. From there startgame() is called and the game is in the startup state. If the variable dir isn’t zero, indicating that a button has been pressed, we start the game, and if not the game start up LED animations are displayed. When a snake game is started, based on dir’s value the snake moves up (dir = 4), down (dir = 2), left (dir = 3), or right (dir = 1). It then sets the variable lastdir to the opposite dir value; each time you move, you can’t move in the lastdir direction. After moving the snake, the snake’s length is iterated through to detect if the snake has collided with itself or the edge, which will return the game to the starting screen. Additionally, if the snake’s head is the same location as the food, snakelen increases by 1 and food is generated elsewhere. 




Interrupt Service Routine(s) Purpose:
Timer_A0 vector ISR: Makes sure the system is periodically woken up (32 times per a second) to handle LED display updating and logic.

Port 2 Vector ISR: Handles the button presses, making sure that the LED snake moves in the direction that corresponds to which button was pressed. Logic here prevents the snake from moving in the direction it came from.


















